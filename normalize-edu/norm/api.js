var _0x4252=['Origin:\x20','\x20is\x20not\x20allowed\x20to\x20access\x20API!','configureCron','worker','role','data_broker','EmailCron','scheduleMassPasswordReset','migrate','_AAName','MSSQLToPG','run','handleError','unhandledRejection','development','status','send','socket','from\x20api.ts\x20req\x20socket\x20err','isMaster','DB_NAME','forEach','readyCallback','onReadyCallback','ready','importModel','make','getModelByName','controller','pop','select\x20*\x20from\x20\x22User\x22','super_admin','createServer','\x20by\x20Worker\x20PID:\x20','pid','address','Server\x20not\x20listening\x20correctly\x20-\x20is\x20address\x20in\x20use?','connection','EADDRINUSE','\x20is\x20in\x20use\x20by\x20worker\x20pid:\x20','close','listen','restartWorkers','workers','shutdown','kill','SIGKILL','API','__awaiter','done','value','apply','next','__esModule','express','morgan','body-parser','./models/base.model','BaseModel','./migration/mssql-to-postgres','./cron/email.cron','./cron/cron','http','cors','mongoose','passport','express-jwt','bcrypt','helmet','cluster','express-session','connect-pg-simple','pool','schema','initialized','server','app','port','cronManager','Cron','dbExistCheck','query','log','stack','rows','count','getDBInstance','Pool','error','postgres://','dbUser','dbHost','/postgres','Client','connect','createDatabase','CREATE\x20DATABASE\x20\x22','dbName','\x22\x20OWNER\x20','create\x20database\x20error','configureDatabase','dbType','mongo','options','connectionString','conn\x20string','database\x20set\x20to\x20',',\x20and\x20is\x20connected\x20to\x20','initialize','postgres','dbPort','loadTennancy','mysql','mssql','configureMiddleware','use','json','urlencoded','getSessConfig','Session','env','SESSION_SECRET','sessID','configureRoutes','./models','bootstrap','createModel','keys','indexOf','cachedModels','model','N/A','models','push','routePrefix','toLowerCase','router','length','map','all','init','filter','seed','seedDir','../../seed','name','processModels','reduce','then','sortModels','getFkeys','resolve','sort','keyCount','SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tc.constraint_name,\x20tc.table_name,\x20kcu.column_name,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ccu.table_name\x20AS\x20foreign_table_name,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ccu.column_name\x20AS\x20foreign_column_name\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20information_schema.table_constraints\x20AS\x20tc\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20JOIN\x20information_schema.key_column_usage\x20AS\x20kcu\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20tc.constraint_name\x20=\x20kcu.constraint_name\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20JOIN\x20information_schema.constraint_column_usage\x20AS\x20ccu\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20ccu.constraint_name\x20=\x20tc.constraint_name\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20constraint_type\x20=\x20\x27FOREIGN\x20KEY\x27\x20AND\x20tc.table_name=\x27','configureJWT','environment','production','splice','JWT_SECRET','headers','authorization','split','Bearer','unless','configureCors','origin','host','corsWhitelist'];(function(_0x31fdc1,_0x3947ce){var _0x4285e1=function(_0x3ee70e){while(--_0x3ee70e){_0x31fdc1['push'](_0x31fdc1['shift']());}};_0x4285e1(++_0x3947ce);}(_0x4252,0xd9));var _0x2041=function(_0x39dfee,_0x189ae3){_0x39dfee=_0x39dfee-0x0;var _0x33304e=_0x4252[_0x39dfee];return _0x33304e;};'use strict';var __awaiter=this&&this[_0x2041('0x0')]||function(_0x1c26a1,_0x31c86f,_0x41528d,_0x91fb67){return new(_0x41528d||(_0x41528d=Promise))(function(_0x37c278,_0x4705cf){function _0x45475b(_0x229d79){try{_0x494ae6(_0x91fb67['next'](_0x229d79));}catch(_0x31679f){_0x4705cf(_0x31679f);}}function _0x2c3c1d(_0x1869dc){try{_0x494ae6(_0x91fb67['throw'](_0x1869dc));}catch(_0x3f2183){_0x4705cf(_0x3f2183);}}function _0x494ae6(_0x740ff){_0x740ff[_0x2041('0x1')]?_0x37c278(_0x740ff['value']):new _0x41528d(function(_0x37c278){_0x37c278(_0x740ff[_0x2041('0x2')]);})['then'](_0x45475b,_0x2c3c1d);}_0x494ae6((_0x91fb67=_0x91fb67[_0x2041('0x3')](_0x1c26a1,_0x31c86f||[]))[_0x2041('0x4')]());});};Object['defineProperty'](exports,_0x2041('0x5'),{'value':!![]});const express=require(_0x2041('0x6'));const logger=require(_0x2041('0x7'));const bodyParser=require(_0x2041('0x8'));const base_model_1=require(_0x2041('0x9'));exports[_0x2041('0xa')]=base_model_1[_0x2041('0xa')];const mssql_to_postgres_1=require(_0x2041('0xb'));const email_cron_1=require(_0x2041('0xc'));const cron_1=require(_0x2041('0xd'));const pg=require('pg');const http=require(_0x2041('0xe'));const cors=require(_0x2041('0xf'));const mongoose=require(_0x2041('0x10'));const passport=require(_0x2041('0x11'));const Strategy=require('passport-local');const expressJWT=require(_0x2041('0x12'));const bcrypt=require(_0x2041('0x13'));const helmet=require(_0x2041('0x14'));const compression=require('compression');const cluster=require(_0x2041('0x15'));const cookieParser=require('cookie-parser');const session=require(_0x2041('0x16'));const pgSession=require(_0x2041('0x17'))(session);class API{constructor(_0x2da64b){this['options']=_0x2da64b;this[_0x2041('0x18')]=null;this['models']=[];this[_0x2041('0x19')]=[];this[_0x2041('0x1a')]=![];this['cachedModels']=[];this[_0x2041('0x1b')]=null;this[_0x2041('0x1c')]=express();this[_0x2041('0x1d')]=_0x2da64b[_0x2041('0x1d')]||0xbb8;this[_0x2041('0x1e')]=new cron_1[(_0x2041('0x1f'))](_0x2da64b,cluster);this['configureDatabase'](this[_0x2041('0x1c')],_0x2da64b);}[_0x2041('0x20')](_0x1ec282,_0x3f2997){return new Promise(_0x1613ad=>{_0x1ec282[_0x2041('0x21')](_0x3f2997,(_0x53d993,_0x36669d)=>{if(_0x53d993){console[_0x2041('0x22')]('Error\x20while\x20connecting:\x20'+_0x53d993[_0x2041('0x23')]);_0x1613ad(![]);}else{if(_0x36669d[_0x2041('0x24')][0x0][_0x2041('0x25')]==0x0){_0x1613ad(![]);}else{_0x1613ad(!![]);}}});});}[_0x2041('0x26')](_0x245332,_0x2b5226,_0x451d11){return new Promise(_0x6ab9bc=>__awaiter(this,void 0x0,void 0x0,function*(){if(!this['db']){this[_0x2041('0x18')]=new pg[(_0x2041('0x27'))](_0x245332);this[_0x2041('0x18')]['on'](_0x2041('0x28'),(_0x2eb578,_0x39a8ea)=>{console[_0x2041('0x28')]('idle\x20client\x20error',_0x2eb578['message'],_0x2eb578['stack']);});let _0x378b03=_0x2041('0x29')+_0x2b5226[_0x2041('0x2a')]+':'+_0x2b5226['dbPassword']+'@'+_0x2b5226[_0x2041('0x2b')]+':'+_0x2b5226['dbPort']+_0x2041('0x2c');let _0x2c0848=new pg[(_0x2041('0x2d'))](_0x378b03);_0x2c0848[_0x2041('0x2e')]();let _0x30e17a='select\x20count(*)\x20from\x20pg_catalog.pg_database\x20where\x20lower(datname)\x20=\x20lower(\x27'+_0x2b5226['dbName']+'\x27)';const _0x563556=yield this[_0x2041('0x20')](_0x2c0848,_0x30e17a);if(!_0x563556){let _0x3baa52=yield this['createDatabase'](_0x2c0848,_0x2b5226);}else{}this['db']==null?this['db']={'query':null,'connect':null}:null;this['db']={'query':(_0x462ee7,_0x6d08cd,_0x4e08d8)=>{return this[_0x2041('0x18')][_0x2041('0x21')](_0x462ee7,_0x6d08cd,(_0xf892bb,_0x2b73fb)=>{_0x4e08d8(_0xf892bb,_0x2b73fb);});},'connect':_0x3a1a0a=>{return this[_0x2041('0x18')][_0x2041('0x2e')]((_0x4a632c,_0x2c0848,_0xc20ce5)=>{_0x3a1a0a(_0x4a632c,_0x2c0848,_0xc20ce5);});}};_0x6ab9bc(this['db']);return this['db'];}else{_0x6ab9bc(this['db']);return this['db'];}}));}[_0x2041('0x2f')](_0x11bd40,_0x5dbbc0){return new Promise(_0xcd635d=>{const _0x5dae67=_0x2041('0x30')+_0x5dbbc0[_0x2041('0x31')]+_0x2041('0x32')+_0x5dbbc0[_0x2041('0x2a')];_0x11bd40[_0x2041('0x21')](_0x5dae67,(_0x464763,_0x355c03)=>{if(_0x464763){console[_0x2041('0x22')](_0x2041('0x33'),_0x464763);setTimeout(()=>{_0xcd635d(_0x464763);},0x1770);throw new Error(_0x464763);}else{setTimeout(()=>{_0xcd635d(_0x355c03);},0x1770);}});});}[_0x2041('0x34')](_0x4f1061,_0x48e1fa){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise(_0x3ea279=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x4b2bc5;switch(_0x48e1fa[_0x2041('0x35')]){case _0x2041('0x36'):mongoose[_0x2041('0x2e')](this[_0x2041('0x37')][_0x2041('0x38')]);console[_0x2041('0x22')](_0x2041('0x39'),this[_0x2041('0x37')][_0x2041('0x38')]);console[_0x2041('0x22')](_0x2041('0x3a')+this[_0x2041('0x37')][_0x2041('0x35')]+_0x2041('0x3b')+this['options'][_0x2041('0x31')]);_0x4b2bc5=yield this[_0x2041('0x3c')](_0x4f1061,_0x48e1fa);break;case _0x2041('0x3d'):let _0x19e935={'user':_0x48e1fa[_0x2041('0x2a')],'database':_0x48e1fa[_0x2041('0x31')],'password':_0x48e1fa['dbPassword'],'host':_0x48e1fa['dbHost'],'port':_0x48e1fa[_0x2041('0x3e')],'max':0x14,'idleTimeoutMillis':0xbb8,'connectionTimeoutMillis':0xbb8};const _0x163de0=yield this[_0x2041('0x26')](_0x19e935,_0x48e1fa);if(_0x163de0){_0x4b2bc5=yield this[_0x2041('0x3c')](_0x4f1061,_0x48e1fa);yield this[_0x2041('0x3f')](_0x163de0);}break;case _0x2041('0x40'):break;case _0x2041('0x41'):break;default:break;}_0x3ea279(_0x4b2bc5);}));});}[_0x2041('0x42')](_0x1fa70f){return new Promise(_0x29b099=>__awaiter(this,void 0x0,void 0x0,function*(){_0x1fa70f[_0x2041('0x43')](logger('dev'));_0x1fa70f[_0x2041('0x43')](bodyParser[_0x2041('0x44')]({'limit':'35mb'}));_0x1fa70f['use'](bodyParser[_0x2041('0x45')]({'extended':![]}));_0x1fa70f[_0x2041('0x43')](helmet());_0x1fa70f[_0x2041('0x43')](compression());_0x1fa70f[_0x2041('0x43')](cookieParser());_0x1fa70f[_0x2041('0x43')](session(yield this[_0x2041('0x46')]()));_0x29b099(!![]);}));}[_0x2041('0x46')](){return new Promise(_0x42e43d=>{_0x42e43d({'store':new pgSession({'pool':this['pool'],'tableName':_0x2041('0x47')}),'secret':process[_0x2041('0x48')][_0x2041('0x49')],'resave':![],'name':_0x2041('0x4a'),'saveUninitialized':![],'rolling':!![],'cookie':{'maxAge':0x1e*0x3c*0x3e8*0x4,'path':'/','httpOnly':!![]}});});}[_0x2041('0x4b')](_0x2143ec){return new Promise(_0x545154=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x798184=require(_0x2041('0x4c'));setTimeout(()=>__awaiter(this,void 0x0,void 0x0,function*(){yield this[_0x2041('0x4d')](_0x798184,![]);_0x545154(!![]);}),0x3e8);}));}[_0x2041('0x4e')](_0x254880,_0x2e1d7f,_0x15d2c7,_0x2b1411){return new Promise(_0x5b1b3d=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x3e0d55;if(Object[_0x2041('0x4f')](_0x254880[_0x2041('0x19')])[_0x2041('0x50')](_0x2e1d7f)!=-0x1){_0x5b1b3d(_0x254880[_0x2041('0x51')][_0x2e1d7f]);}else{if(_0x2b1411){let _0x33b145=new _0x15d2c7[_0x2e1d7f](_0x254880);const _0x5aa691=[..._0x33b145[_0x2041('0x52')]];_0x3e0d55=new base_model_1['BaseModel'](_0x254880[_0x2041('0x37')],_0x2e1d7f,_0x5aa691[0x0],_0x5aa691[0x1]!=null?_0x5aa691[0x1]:_0x2041('0x53'),_0x5aa691[0x2]!=null&&_0x5aa691[0x2]['length']>0x0?_0x5aa691[0x2]:[],_0x254880);_0x33b145[_0x2041('0x52')]=_0x3e0d55['model'];}else{_0x3e0d55=new _0x15d2c7[_0x2e1d7f](_0x254880[_0x2041('0x37')],_0x2e1d7f,_0x254880);}_0x254880[_0x2041('0x54')][_0x2041('0x55')](_0x3e0d55[_0x2041('0x52')]);_0x254880[_0x2041('0x19')][_0x2e1d7f]=_0x3e0d55[_0x2041('0x52')];_0x254880[_0x2041('0x1c')][_0x2041('0x43')](_0x254880[_0x2041('0x37')][_0x2041('0x56')]+'/'+_0x2e1d7f[_0x2041('0x57')](),_0x3e0d55[_0x2041('0x52')][_0x2041('0x58')]['make']());_0x254880[_0x2041('0x51')][_0x2e1d7f]=_0x3e0d55;_0x5b1b3d(_0x3e0d55);}}));}[_0x2041('0x4d')](_0x47cbb5,_0x186e8f){return new Promise(_0x4210d6=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x2f00c0=_0x186e8f!=null?_0x186e8f:![];const _0x505680=Object[_0x2041('0x4f')](_0x47cbb5)||[];const _0x459467=_0x505680['length']>0x0?_0x505680[_0x2041('0x59')]:0x0;const _0x5d65c6=_0x505680&&_0x505680['length']>0x0?_0x505680[_0x2041('0x5a')]((_0x580d6b,_0x1c6478)=>__awaiter(this,void 0x0,void 0x0,function*(){return yield this[_0x2041('0x4e')](this,_0x580d6b,_0x47cbb5,_0x2f00c0);})):[];let _0x4f7b3c=_0x5d65c6[_0x2041('0x59')]>0x0?yield Promise[_0x2041('0x5b')](_0x5d65c6):[];let _0x2f8bb2=_0x4f7b3c['length']>0x0?_0x4f7b3c[_0x2041('0x5a')](_0x3157da=>{return _0x3157da[_0x2041('0x5c')]();}):[];let _0x5b1acb=yield Promise[_0x2041('0x5b')](_0x2f8bb2);let _0x154311=_0x5b1acb[_0x2041('0x59')]>0x0?_0x5b1acb[_0x2041('0x5d')](_0x3ae6a7=>!_0x3ae6a7['ready']):[];let _0x35db07=_0x154311[_0x2041('0x59')]>0x0?_0x154311[_0x2041('0x5a')](_0x2b9275=>__awaiter(this,void 0x0,void 0x0,function*(){return _0x2b9275[_0x2041('0x5c')]();})):[];let _0x15be93=_0x459467==0x0||_0x459467!=0x0&&_0x154311[_0x2041('0x59')]==0x0?!![]:![];if(!_0x15be93){let _0x1431b8=yield Promise[_0x2041('0x5b')](_0x35db07);_0x15be93=!![];_0x4210d6(!![]);}else{let _0x4862a5=_0x5b1acb['length']>0x0?_0x5b1acb[_0x2041('0x5a')]((_0x3b7117,_0x116c1c,_0x29c619)=>__awaiter(this,void 0x0,void 0x0,function*(){return _0x3b7117[_0x2041('0x5e')](this[_0x2041('0x37')][_0x2041('0x5f')]!=null?this[_0x2041('0x37')][_0x2041('0x5f')]:_0x2041('0x60'),_0x3b7117[_0x2041('0x61')]);})):[];let _0x109fac=_0x4862a5['length']>0x0?yield Promise[_0x2041('0x5b')](_0x4862a5):!![];_0x4210d6(_0x109fac);return _0x109fac;}}));}[_0x2041('0x62')](_0x272695,_0x2b798a,_0x5b0415,_0x114191){let _0x3c79f3=[];return _0x272695[_0x2041('0x63')]((_0xafaa3a,_0x5b7af8)=>{return _0xafaa3a[_0x2041('0x64')](()=>{return _0x114191(this,_0x5b7af8,_0x2b798a,_0x5b0415)[_0x2041('0x64')](_0x184ee1=>{_0x3c79f3['push'](_0x184ee1);return _0x3c79f3;});});},Promise['resolve']());}[_0x2041('0x65')](_0x784dcd){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise(_0x3009db=>{let _0x3370ef=[];let _0x493ecf=Object[_0x2041('0x4f')](_0x784dcd)['reduce']((_0x17bbc7,_0x48a329,_0x43b311,_0x4cc6de)=>{return _0x17bbc7[_0x2041('0x64')](()=>__awaiter(this,void 0x0,void 0x0,function*(){return this[_0x2041('0x66')](_0x48a329)[_0x2041('0x64')](_0x518a48=>{_0x3370ef['push'](_0x518a48);return _0x3370ef;});}));},Promise[_0x2041('0x67')]());_0x493ecf[_0x2041('0x64')](_0x2c3f54=>{_0x3009db(_0x2c3f54?_0x2c3f54[_0x2041('0x68')]((_0x1a7236,_0x3c8e07)=>{return _0x1a7236[_0x2041('0x69')]>_0x3c8e07[_0x2041('0x69')]?-0x1:0x1;}):![]);});});});}['getFkeys'](_0x12ffca){return new Promise(_0x4b6d74=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x5ec4e7=_0x2041('0x6a')+_0x12ffca+'\x27;';this['db'][_0x2041('0x21')](_0x5ec4e7,null,(_0xd01ee6,_0xaa44e9)=>{if(_0xaa44e9&&_0xaa44e9[_0x2041('0x24')]){_0x4b6d74({'table':_0x12ffca,'keyCount':_0xaa44e9[_0x2041('0x24')][_0x2041('0x59')]});}});}));}[_0x2041('0x6b')](_0x62e2c4){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise(_0x56105b=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x2d36fd=yield this['superAdminExistCheck']();if(_0x2d36fd){let _0xc01327=[/\/api\/v1\/user\/login(?!\/renew)/,/\/api\/v1\/user\/recover-password/,/\/api\/v1\/user\/forgot-password/,/\/api\/v1\/user\/is-loggedin/,/\/api\/v1\/user\/create-secure/,/\/api\/v1\/user\/get-session-user/,/\/api\/v1\/app\/tennant/];_0x2d36fd&&this[_0x2041('0x37')][_0x2041('0x6c')]==_0x2041('0x6d')?_0xc01327[_0x2041('0x6e')](_0xc01327[_0x2041('0x50')](/\/api\/v1\/user\/create-secure/,0x1)):null;_0x62e2c4['use']('/',expressJWT({'secret':process[_0x2041('0x48')][_0x2041('0x6f')],'credentialsRequired':!![],'getToken':_0x3e98fb=>{if(_0x3e98fb&&_0x3e98fb[_0x2041('0x70')]&&_0x3e98fb[_0x2041('0x70')][_0x2041('0x71')]&&_0x3e98fb[_0x2041('0x70')][_0x2041('0x71')][_0x2041('0x72')]('\x20')[0x0]===_0x2041('0x73')){return _0x3e98fb[_0x2041('0x70')]['authorization'][_0x2041('0x72')]('\x20')[0x1];}else if(_0x3e98fb&&_0x3e98fb['query']&&_0x3e98fb['query']['token']){return _0x3e98fb[_0x2041('0x21')]['token'];}return null;}})[_0x2041('0x74')]({'path':_0xc01327}));_0x56105b(!![]);}else{_0x56105b(![]);}}));});}[_0x2041('0x75')](_0xc6d7c9){return new Promise(_0x5a45ff=>{let _0x5908=![];_0xc6d7c9['use']((_0x1c334f,_0xc3fe11,_0x51ea04)=>{_0x5908=_0x1c334f[_0x2041('0x70')][_0x2041('0x76')]===undefined;_0x1c334f[_0x2041('0x70')][_0x2041('0x76')]=_0x1c334f[_0x2041('0x70')][_0x2041('0x76')]||_0x1c334f[_0x2041('0x70')][_0x2041('0x77')];_0x51ea04();});const _0x4fde10=this[_0x2041('0x37')][_0x2041('0x78')];const _0x3c5ae9={'origin':(_0x2ce37b,_0x347cab)=>{if(_0x5908||_0x4fde10[_0x2041('0x50')](_0x2ce37b)!==-0x1){_0x347cab(null,!![]);}else{_0x347cab(new Error(_0x2041('0x79')+_0x2ce37b+_0x2041('0x7a')));}},'credentials':!![]};_0xc6d7c9[_0x2041('0x37')]('*',cors(_0x3c5ae9));_0xc6d7c9[_0x2041('0x43')](cors(_0x3c5ae9));_0x5a45ff(!![]);});}[_0x2041('0x7b')](_0x212a9f,_0x20f9bd,_0x6af43e){return new Promise(_0x5d6b8b=>{if(this[_0x2041('0x37')][_0x2041('0x15')]&&_0x6af43e&&_0x6af43e[_0x2041('0x7c')]&&_0x6af43e['worker']['process']['env'][_0x2041('0x7d')]==_0x2041('0x7e')||!this[_0x2041('0x37')][_0x2041('0x15')]){const _0x530f72=new email_cron_1[(_0x2041('0x7f'))](_0x212a9f,_0x20f9bd,_0x6af43e);_0x530f72[_0x2041('0x80')]({'days':0x5a,'maxEmailSend':0x3});_0x5d6b8b(!![]);}else{_0x5d6b8b(![]);}});}[_0x2041('0x81')](_0x31b9dc){const _0x482a05=[{'table':_0x2041('0x82')}];new mssql_to_postgres_1[(_0x2041('0x83'))](_0x31b9dc,_0x482a05,this)[_0x2041('0x84')]();}[_0x2041('0x85')](_0x5cd60a){if(this['options'][_0x2041('0x6c')]=='development'){process['on'](_0x2041('0x86'),_0x5a1fbf=>console[_0x2041('0x22')](_0x5a1fbf));}_0x5cd60a[_0x2041('0x43')]((_0x2948c4,_0x128c9b,_0x603c62,_0x2dc15b)=>{if(!_0x2948c4){_0x2dc15b();}else{if(this[_0x2041('0x37')][_0x2041('0x6c')]==_0x2041('0x87')){console['error'](_0x2948c4[_0x2041('0x23')]);_0x603c62[_0x2041('0x88')](0x1f4)[_0x2041('0x89')]({'error':_0x2948c4[_0x2041('0x23')]});}else if(this['options'][_0x2041('0x6c')]==_0x2041('0x6d')){_0x2dc15b();}}_0x128c9b[_0x2041('0x8a')]['on'](_0x2041('0x28'),()=>{if(this[_0x2041('0x37')][_0x2041('0x6c')]=='development'){console[_0x2041('0x22')](_0x2041('0x8b'));_0x603c62[_0x2041('0x88')](0x1f4)[_0x2041('0x89')]({'error':_0x2948c4[_0x2041('0x23')]});}else if(this[_0x2041('0x37')]['environment']==_0x2041('0x6d')){_0x2dc15b();}});});}[_0x2041('0x3f')](_0x177a09){return __awaiter(this,void 0x0,void 0x0,function*(){if(cluster&&cluster[_0x2041('0x8c')]||!this[_0x2041('0x37')]['cluster']){return new Promise(_0x2e3537=>{if(_0x177a09&&_0x177a09!=null&&_0x177a09!=undefined&&_0x177a09[_0x2041('0x21')]!=null){_0x177a09[_0x2041('0x21')]('select\x20*\x20from\x20\x22App\x22\x20where\x20\x22active\x22\x20=\x20true\x20and\x20\x22primary\x22\x20=\x20false',null,(_0x18159c,_0x2dc963)=>__awaiter(this,void 0x0,void 0x0,function*(){if(!_0x18159c){if(_0x2dc963&&_0x2dc963[_0x2041('0x24')]['length']>0x0){let _0x5b18e3=[];_0x2dc963[_0x2041('0x24')][_0x2041('0x5a')]((_0x354f8f,_0x25914c,_0x573323)=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x169b33=_0x354f8f[_0x2041('0x37')][_0x2041('0x31')]==process['env'][_0x2041('0x8d')];if(!_0x169b33){let _0x25f4e1=new API(_0x354f8f[_0x2041('0x37')]);_0x5b18e3[_0x2041('0x55')](_0x25f4e1[_0x2041('0x3c')](_0x25f4e1[_0x2041('0x1c')],_0x354f8f[_0x2041('0x37')]));}}));if(_0x5b18e3&&_0x5b18e3['length']>0x0){return Promise['all'](_0x5b18e3)[_0x2041('0x64')](_0x4d526e=>{if(_0x4d526e&&_0x4d526e[_0x2041('0x59')]>0x0){_0x4d526e[_0x2041('0x8e')](_0x16c887=>{_0x16c887['ready'](_0xc4e89b=>{_0xc4e89b['spawn']();});});_0x2e3537(_0x4d526e);}});}else{_0x2e3537();}}else{_0x2e3537();}}else{_0x2e3537();}}));}else{_0x2e3537([]);}});}else{Promise[_0x2041('0x67')]([]);}});}['initialize'](_0x4ecbb6,_0x535ac5){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise(_0x1d0678=>__awaiter(this,void 0x0,void 0x0,function*(){yield this[_0x2041('0x6b')](_0x4ecbb6);yield this[_0x2041('0x42')](_0x4ecbb6);yield this[_0x2041('0x75')](_0x4ecbb6);yield this[_0x2041('0x4b')](_0x4ecbb6);yield this[_0x2041('0x7b')](this,_0x535ac5,cluster);this[_0x2041('0x85')](_0x4ecbb6);this['initialized']=!![];if(this[_0x2041('0x8f')])this[_0x2041('0x8f')](this);if(this[_0x2041('0x90')])this['onReadyCallback'](this);_0x1d0678(this);}));});}[_0x2041('0x91')](_0x337e84){if(this[_0x2041('0x1a')]){_0x337e84(this);}else{this[_0x2041('0x8f')]=_0x337e84;}}['onReady'](_0xc8d57c){if(this['initialized']){_0xc8d57c(this);}else{this[_0x2041('0x90')]=_0xc8d57c;}}[_0x2041('0x92')](_0x3dbba8,_0x3d1dcb,_0x39bbed,_0x1804a5,_0x3100c3){return new Promise(_0x1f7227=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x546ba2=new base_model_1[(_0x2041('0xa'))](this['options'],_0x3dbba8,_0x3d1dcb,_0x39bbed!=null?_0x39bbed:'N/A',_0x1804a5!=null?_0x1804a5:[],this);this[_0x2041('0x54')][_0x2041('0x55')](_0x546ba2[_0x2041('0x52')]);this[_0x2041('0x19')][_0x3dbba8]=_0x546ba2['model'];this[_0x2041('0x1c')][_0x2041('0x43')](this[_0x2041('0x37')][_0x2041('0x56')]+'/'+_0x3dbba8['toLowerCase'](),_0x546ba2[_0x2041('0x52')][_0x2041('0x58')][_0x2041('0x93')]());let _0x2d9f15=yield _0x546ba2[_0x2041('0x5c')]();if(!_0x2d9f15['ready']){yield _0x2d9f15[_0x2041('0x5c')]();}else{_0x2d9f15[_0x2041('0x5e')](this[_0x2041('0x37')][_0x2041('0x5f')]!=null?this[_0x2041('0x37')]['seedDir']:_0x2041('0x60'),_0x2d9f15[_0x2041('0x61')]);}_0x1f7227(_0x2d9f15[_0x2041('0x52')]);return _0x2d9f15[_0x2041('0x52')];}));}[_0x2041('0x94')](_0x4db0b7){return this[_0x2041('0x54')][_0x2041('0x5d')](_0x697c2a=>{return _0x697c2a[_0x2041('0x95')][_0x2041('0x61')]==_0x4db0b7;})[_0x2041('0x96')]();}['getSchema'](_0x5f3505){return this['schema'][_0x5f3505];}['superAdminExistCheck'](){return new Promise(_0x578986=>{this[_0x2041('0x18')]!=null?this[_0x2041('0x18')][_0x2041('0x21')](_0x2041('0x97'),null,(_0x3e3dac,_0x5990f8)=>{if(_0x5990f8&&_0x5990f8[_0x2041('0x24')][_0x2041('0x59')]>0x0){_0x578986(_0x5990f8[_0x2041('0x24')][_0x2041('0x5d')](_0x43ea44=>{return _0x43ea44[_0x2041('0x98')]==!![];})[_0x2041('0x59')]>0x0);}else{_0x578986(![]);}}):_0x578986(![]);});}['spawn'](){if(this[_0x2041('0x37')]['cluster']&&!cluster[_0x2041('0x8c')]||!this[_0x2041('0x37')][_0x2041('0x15')]){this[_0x2041('0x1b')]=http[_0x2041('0x99')](this[_0x2041('0x1c')]);this[_0x2041('0x1b')]['on']('listening',_0x4a1d52=>{console['log']('Server\x20is\x20running\x20and\x20serving:\x20'+this[_0x2041('0x37')][_0x2041('0x31')]+_0x2041('0x9a')+process[_0x2041('0x9b')],this[_0x2041('0x1b')]['address']());if(this[_0x2041('0x1b')][_0x2041('0x9c')]()[_0x2041('0x1d')]!=this['port']){throw new Error(_0x2041('0x9d'));}})['on'](_0x2041('0x9e'),_0x59351d=>{})['on']('error',_0x3c3978=>{if(_0x3c3978['code']==_0x2041('0x9f')){console[_0x2041('0x22')]('Port:\x20'+this[_0x2041('0x1d')]+_0x2041('0xa0')+process[_0x2041('0x9b')]+'!');setTimeout(()=>{this['server'][_0x2041('0xa1')]();},0x3e8);}})[_0x2041('0xa2')](this['port']);}return{'server':this[_0x2041('0x1b')],'api':this};}[_0x2041('0xa2')](){this[_0x2041('0x1b')]!=null?this[_0x2041('0x1b')]['listen'](this['port']):null;}[_0x2041('0xa3')](){let _0x5ce3d8=[];if(cluster&&cluster[_0x2041('0xa4')]){for(let _0x11a3d3 in cluster[_0x2041('0xa4')]){_0x5ce3d8[_0x2041('0x55')](_0x11a3d3);}_0x5ce3d8['forEach'](_0x21447f=>{cluster[_0x2041('0xa4')][_0x21447f][_0x2041('0x89')]({'cmd':_0x2041('0xa5'),'from':'master'});setTimeout(()=>{if(cluster[_0x2041('0xa4')][_0x21447f]){cluster['workers'][_0x21447f][_0x2041('0xa6')](_0x2041('0xa7'));}},0x1388);});}}}exports[_0x2041('0xa8')]=API;