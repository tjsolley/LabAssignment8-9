var _0x3cb3=['get','data','count','get\x20failed','getTotalCount','get\x20total\x20count\x20success','csvExport','filterID','keys','query','rows','JSONToRow','map','includes','slice','reduce','_at','_date','isValid','format','YYYY-MM-DD','.csv','CSV\x20Export\x20Failed!\x20Please\x20check\x20your\x20request\x20object!','listAllTables','table','SELECT\x20t.table_name,\x20json_agg(c.*)\x20as\x20columns\x20FROM\x20information_schema.tables\x20as\x20t\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20inner\x20join\x20(select\x20table_name,\x20column_name,\x20column_default,\x20data_type\x20from\x20information_schema.columns)\x20as\x20c\x20on\x20(t.table_name\x20=\x20c.table_name)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20t.table_schema=\x27public\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20t.table_type=\x27BASE\x20TABLE\x27','\x20and\x20t.table_name\x20=\x20\x27','\x27\x20group\x20by\x20t.table_name','\x20group\x20by\x20t.table_name','No\x20tables\x20found!','listAllProps','select\x20column_name\x20from\x20information_schema.columns\x20where\x20table_name=\x27','getError','error','PSQLWrapper','random','floor','toString','substring','headers','authorization','split','Bearer','JWT_SECRET','localtimestamp','SYS','username','getSchema','Changelog','controller','checkForUpdates','DESC','models','encrypt','undefined','bcrypt','indexOf','----------->\x20from\x20polling\x20','client[\x27subscriptions\x27]','subscription\x20cancelled','--------->','<----------','close','subscription\x20has\x20closed','removeSessClient','end','stopSubscription','getJSONModels','string','escape','ISO_8601','trim','convertToUTCDate','BaseController','__awaiter','next','throw','done','value','then','apply','defineProperty','__esModule','jsonwebtoken','moment','name','model','api','requestInterceptor','log','from\x20interceptor...process\x20pid','send','notifyRequest','user','getToken','length','toPromise','getRequestUser','exec','expiredAt','json','sendError','message','options','dbType','mongo','postgres','secretFields','getAllSecretFields','method','reqUser','isArray','body','toLowerCase','getTouchByUser','created_by','put','updated_by','setTouchByUser','insert','request\x20failed','No\x20token\x20was\x20sent\x20with\x20the\x20request!','Session\x20does\x20not\x20exist\x20or\x20has\x20expired!\x20Please\x20login\x20to\x20establish\x20a\x20session!','findById','status','psql','createTable','schema','schemaInsertPayload','sendAsPromise','create\x20table\x20failed','create\x20table\x20failed!\x20No\x20schema\x20or\x20schema\x20insert\x20payload','getAll','find','get\x20all\x20records\x20failed','statusCode','No\x20','\x20record\x20found\x20for\x20id\x20','params','Coming\x20soon.','bulkInsert','forEach','POST','bulk\x20insert\x20success','create\x20failed','update','assign','PUT','update\x20success','update\x20error','remove','delete','delete\x20success','removeWhere','deleteWhere','updateSet','getSecretFields','Comming\x20soon.','update\x20failed','unsubscribe','subscription','Session','subscriberID','interval','sess','clients','timestamp','subscriptions','push','findIndex','poll','select','subscription\x20get\x20success','getTime','pid','saveSession','stringify'];(function(_0x304a4c,_0x2a30df){var _0x2542ba=function(_0x4db4a1){while(--_0x4db4a1){_0x304a4c['push'](_0x304a4c['shift']());}};_0x2542ba(++_0x2a30df);}(_0x3cb3,0x1ac));var _0x6b4f=function(_0x29eed8,_0x4bb4aa){_0x29eed8=_0x29eed8-0x0;var _0x47e29c=_0x3cb3[_0x29eed8];return _0x47e29c;};'use strict';/*
 The base controller file containing default controller methods
 */var __awaiter=this&&this[_0x6b4f('0x0')]||function(_0x3313b8,_0x90a195,_0x1641de,_0x112b1f){return new(_0x1641de||(_0x1641de=Promise))(function(_0x5b2ced,_0x13b1f5){function _0x4b1b79(_0x487140){try{_0x51f567(_0x112b1f[_0x6b4f('0x1')](_0x487140));}catch(_0x362aa3){_0x13b1f5(_0x362aa3);}}function _0x4eb43a(_0x23106e){try{_0x51f567(_0x112b1f[_0x6b4f('0x2')](_0x23106e));}catch(_0x3eefc6){_0x13b1f5(_0x3eefc6);}}function _0x51f567(_0x521da4){_0x521da4[_0x6b4f('0x3')]?_0x5b2ced(_0x521da4[_0x6b4f('0x4')]):new _0x1641de(function(_0x5b2ced){_0x5b2ced(_0x521da4[_0x6b4f('0x4')]);})[_0x6b4f('0x5')](_0x4b1b79,_0x4eb43a);}_0x51f567((_0x112b1f=_0x112b1f[_0x6b4f('0x6')](_0x3313b8,_0x90a195||[]))[_0x6b4f('0x1')]());});};Object[_0x6b4f('0x7')](exports,_0x6b4f('0x8'),{'value':!![]});const postgres_wrapper_1=require('../wrapper/postgres.wrapper');const jwt=require(_0x6b4f('0x9'));const moment=require(_0x6b4f('0xa'));class BaseController{constructor(_0x315276,_0x4d4dff,_0x59d4ec,_0x5e20a0){this['options']=_0x315276;this[_0x6b4f('0xb')]=_0x4d4dff;this[_0x6b4f('0xc')]=_0x59d4ec;this[_0x6b4f('0xd')]=_0x5e20a0;this[_0x6b4f('0xe')]=(_0x31da56,_0x267900,_0xe70415)=>__awaiter(this,void 0x0,void 0x0,function*(){console[_0x6b4f('0xf')](_0x6b4f('0x10'),process['pid']);process&&process[_0x6b4f('0x11')]!=null?process[_0x6b4f('0x11')]({'cmd':_0x6b4f('0x12'),'procId':process['pid']}):![];if(_0x31da56['session'][_0x6b4f('0x13')]!=null){let _0x428f45=this[_0x6b4f('0x14')](_0x31da56);if(_0x428f45&&_0x428f45[_0x6b4f('0x15')]>0x0){let _0x3d184e=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x17')])[_0x6b4f('0x18')](_0x428f45);if(_0x3d184e){if(_0x3d184e['name']&&_0x3d184e['message']&&_0x3d184e[_0x6b4f('0x19')]){_0x267900[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0x1f4,{'name':_0x3d184e[_0x6b4f('0xb')],'message':_0x3d184e[_0x6b4f('0x1c')],'expiredAt':_0x3d184e['expiredAt']}));}else{if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x1f')){}else if(this['options'][_0x6b4f('0x1e')]==_0x6b4f('0x20')){_0x31da56[_0x6b4f('0x21')]=this[_0x6b4f('0x22')]();_0x31da56['reqUser']=_0x3d184e;let _0x4e109a=_0x31da56[_0x6b4f('0x23')]['toLowerCase']();if(_0x31da56[_0x6b4f('0x24')]){if(Array[_0x6b4f('0x25')](_0x31da56[_0x6b4f('0x26')])){_0x31da56['body']=_0x31da56[_0x6b4f('0x26')]['map']((_0x13f2b7,_0x29ee41,_0x64b447)=>{if(_0x31da56[_0x6b4f('0x23')][_0x6b4f('0x27')]()=='post'){_0x13f2b7['created_by']=this[_0x6b4f('0x28')](_0x31da56,_0x6b4f('0x29'));}else if(_0x31da56[_0x6b4f('0x23')][_0x6b4f('0x27')]()==_0x6b4f('0x2a')){_0x13f2b7['updated_by']=this[_0x6b4f('0x28')](_0x31da56,_0x6b4f('0x2b'));}return _0x13f2b7;});}else{if(_0x31da56[_0x6b4f('0x23')][_0x6b4f('0x27')]()=='post'){this[_0x6b4f('0x2c')](_0x31da56,_0x6b4f('0x2d'));}else if(_0x31da56[_0x6b4f('0x23')]['toLowerCase']()==_0x6b4f('0x2a')){this[_0x6b4f('0x2c')](_0x31da56,'update');}}}_0xe70415();}}}else{_0x267900[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0x1f4,_0x6b4f('0x2e')));}}else{_0x267900[_0x6b4f('0x1a')](this['sendError'](0x193,{'message':_0x6b4f('0x2f')}));}}else{_0x267900['json'](this['sendError'](0x191,{'message':_0x6b4f('0x30')}));}});this['findByIdInterceptor']=(_0x28fa9a,_0x34ad55,_0xaa2133)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this['options'][_0x6b4f('0x1e')]=='mongo'){this[_0x6b4f('0xc')][_0x6b4f('0x31')](_0x28fa9a['params']['id'],(_0x1550a2,_0x59e3f9)=>{if(_0x1550a2){_0x34ad55[_0x6b4f('0x32')](0x1f4)[_0x6b4f('0x11')](_0x1550a2);}else if(_0x59e3f9){_0x28fa9a[this['name']]=_0x59e3f9;_0xaa2133();}else{_0x34ad55[_0x6b4f('0x32')](0x194)['send'](_0x1550a2);}});}else if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]=='postgres'){let _0x23a5c7=yield this['toPromise'](this[_0x6b4f('0x33')][_0x6b4f('0x31')],this['psql'])[_0x6b4f('0x18')](_0x28fa9a,_0x34ad55,_0xaa2133);if(_0x23a5c7){_0x28fa9a[this[_0x6b4f('0xb')]]=_0x23a5c7;}_0xaa2133();}});this[_0x6b4f('0x34')]=(_0x43c6a3,_0x47e259,_0x178b42)=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x257429=_0x43c6a3&&_0x43c6a3[_0x6b4f('0x26')]&&_0x43c6a3[_0x6b4f('0x26')]['schema']!=null?_0x43c6a3['body']['schema']:_0x43c6a3['schema']!=null?_0x43c6a3[_0x6b4f('0x35')]:![];let _0x36116c=_0x43c6a3&&_0x43c6a3[_0x6b4f('0x26')]&&_0x43c6a3[_0x6b4f('0x26')][_0x6b4f('0x36')]!=null?_0x43c6a3[_0x6b4f('0x26')]['schemaInsertPayload']:_0x43c6a3[_0x6b4f('0x36')]!=null?_0x43c6a3[_0x6b4f('0x36')]:![];if(_0x257429&&_0x36116c){const _0x314bb0=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x33')][_0x6b4f('0x34')])[_0x6b4f('0x18')](_0x257429,_0x36116c);if(_0x314bb0){if(_0x47e259==null){return this[_0x6b4f('0x37')](0xc8,_0x314bb0);}else{_0x47e259['json'](this[_0x6b4f('0x11')](0xc8,_0x314bb0,null,null,'create\x20table\x20success'));}}else{if(_0x47e259==null){return this[_0x6b4f('0x37')](0x1f4,_0x6b4f('0x38'));}_0x47e259[_0x6b4f('0x1a')](this['sendError'](0x1f4,_0x6b4f('0x38')));}}else{if(_0x47e259==null){return this[_0x6b4f('0x37')](0x1f4,_0x6b4f('0x39'));}_0x47e259[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0x1f4,'create\x20table\x20failed!\x20No\x20schema\x20or\x20schema\x20insert\x20payload'));}});this[_0x6b4f('0x3a')]=(_0x5aa031,_0xa1cf1f,_0x43bbc0)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x1f')){this['model'][_0x6b4f('0x3b')]((_0x48ed7d,_0x17839f)=>{if(_0x48ed7d){_0xa1cf1f[_0x6b4f('0x1a')](_0x48ed7d);}else{_0xa1cf1f[_0x6b4f('0x1a')](_0x17839f);}});}else if(this[_0x6b4f('0x1d')]['dbType']=='postgres'){let _0x5fe28c=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x33')][_0x6b4f('0x3a')])[_0x6b4f('0x18')](_0x5aa031,_0xa1cf1f,_0x43bbc0);if(_0x5fe28c){if(_0xa1cf1f==null)return this[_0x6b4f('0x37')](0xc8,_0x5fe28c);_0xa1cf1f[_0x6b4f('0x1a')](_0x5fe28c);}else{_0xa1cf1f[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0x1f4,_0x6b4f('0x3c')));}}});this[_0x6b4f('0x31')]=(_0x3a69bf,_0x17277a,_0x3470a5)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this['options'][_0x6b4f('0x1e')]=='mongo'){if(_0x17277a==null)return _0x3a69bf[this[_0x6b4f('0xb')]];_0x17277a[_0x6b4f('0x1a')](_0x3a69bf[this[_0x6b4f('0xb')]]);}else if(this['options']['dbType']==_0x6b4f('0x20')){if(_0x3a69bf[this['name']]!=null){if(_0x17277a==null)return _0x3a69bf[this['name']];_0x17277a[_0x6b4f('0x1a')](this['send'](0xc8,_0x3a69bf[this[_0x6b4f('0xb')]]));}else if(_0x17277a==null){const _0x2bc950=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x33')]['findById'])[_0x6b4f('0x18')](_0x3a69bf,_0x17277a,_0x3470a5);if(_0x2bc950&&_0x2bc950[_0x6b4f('0x3d')]==0x1f4){this[_0x6b4f('0x37')](0x1f4,_0x2bc950);}else if(_0x2bc950&&_0x2bc950[_0x6b4f('0x15')]==0x0){this['sendAsPromise'](0xc8,_0x6b4f('0x3e')+this[_0x6b4f('0xb')]+_0x6b4f('0x3f')+_0x3a69bf[_0x6b4f('0x40')]['id']);}else{this[_0x6b4f('0x37')](0xc8,_0x2bc950);}}else{_0x17277a[_0x6b4f('0x1a')](this['sendError'](0xc9,_0x6b4f('0x3e')+this[_0x6b4f('0xb')]+_0x6b4f('0x3f')+_0x3a69bf['params']['id']));}}});this['bulkInsert']=(_0x17fbf3,_0x1e9000,_0x58685e)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]=='mongo'){_0x1e9000[_0x6b4f('0x32')](0xc8)[_0x6b4f('0x11')]({'message':_0x6b4f('0x41')});}else if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x20')){let _0x4cf711=yield this['toPromise'](this[_0x6b4f('0x33')][_0x6b4f('0x42')])['exec'](_0x17fbf3,_0x1e9000,_0x58685e);if(_0x4cf711){if(_0x1e9000==null){_0x4cf711&&_0x4cf711['length']>0x0?_0x4cf711[_0x6b4f('0x43')]((_0x527e77,_0x55cde2,_0x2babae)=>{this[_0x6b4f('0xf')](_0x17fbf3,_0x527e77['id'],_0x6b4f('0x44'));}):null;return this[_0x6b4f('0x37')](0xc8,_0x4cf711);}_0x1e9000[_0x6b4f('0x1a')](this[_0x6b4f('0x11')](0xc8,_0x4cf711&&_0x4cf711[_0x6b4f('0x15')]>0x0?_0x4cf711:[],_0x4cf711[_0x6b4f('0x15')],null,_0x6b4f('0x45')));}else{if(_0x1e9000==null){return this[_0x6b4f('0x37')](0xc8,_0x4cf711);}_0x1e9000[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0x1f5,_0x6b4f('0x46')));}}});this['insert']=(_0x24bfb0,_0xf59531,_0x3529af)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x1f')){this[_0x6b4f('0xc')]['create'](_0x24bfb0[_0x6b4f('0x26')],(_0x201416,_0x229f26)=>{if(_0x201416){_0xf59531[_0x6b4f('0x32')](0x1f4)[_0x6b4f('0x11')](_0x201416);return![];}else{_0xf59531['status'](0xc9)[_0x6b4f('0x11')](_0x229f26);return _0x229f26;}});}else if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x20')){const _0x5a53c8=yield this['toPromise'](this['psql'][_0x6b4f('0x2d')])[_0x6b4f('0x18')](_0x24bfb0,_0xf59531,_0x3529af);if(_0x5a53c8){this[_0x6b4f('0xf')](_0x24bfb0,_0x5a53c8['id'],_0x6b4f('0x44'));if(_0xf59531==null)return this[_0x6b4f('0x37')](0xc8,_0x5a53c8);_0xf59531['status'](0xc9)[_0x6b4f('0x11')](_0x5a53c8);}else{if(_0xf59531==null)return this[_0x6b4f('0x37')](0xc8,_0x5a53c8);_0xf59531[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0x1f5,'create\x20failed'));}}});this[_0x6b4f('0x47')]=(_0x2e8e18,_0x49b7c0,_0x99d957)=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x1f037c=Object[_0x6b4f('0x48')]({},_0x2e8e18['body']);if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x1f')){this[_0x6b4f('0xc')]['update'](_0x1f037c,(_0x58cda7,_0x4bb5e0)=>{if(_0x58cda7){_0x49b7c0[_0x6b4f('0x32')](0x1f4)[_0x6b4f('0x11')](_0x58cda7);}else{_0x49b7c0[_0x6b4f('0x1a')](_0x1f037c);}});}else if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x20')){const _0x27829b=yield this['toPromise'](this[_0x6b4f('0x33')]['update'])[_0x6b4f('0x18')](_0x2e8e18,_0x49b7c0,_0x99d957);if(_0x27829b){this['log'](_0x2e8e18,_0x27829b['id'],_0x6b4f('0x49'));if(_0x49b7c0==null)return this[_0x6b4f('0x37')](0xc8,_0x27829b);_0x49b7c0[_0x6b4f('0x1a')](this['send'](0xc9,_0x27829b,_0x27829b[_0x6b4f('0x15')],null,_0x6b4f('0x4a')));}else{if(_0x49b7c0==null)return this[_0x6b4f('0x37')](0xc8,_0x27829b);;_0x49b7c0[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0x1f4,{'message':_0x6b4f('0x4b'),'data':_0x27829b}));}}});this[_0x6b4f('0x4c')]=(_0x5d181b,_0x41f033,_0x5c320b)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x1f')){_0x5d181b[this[_0x6b4f('0xb')]]['remove']((_0x33eff9,_0x292bad)=>{if(_0x33eff9){_0x41f033[_0x6b4f('0x32')](0x1f4)[_0x6b4f('0x11')](_0x33eff9);}else{_0x41f033[_0x6b4f('0x32')](0xc8)[_0x6b4f('0x11')]({'message':'delete\x20success'});}});}else if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x20')){const _0x5d0de7=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x33')][_0x6b4f('0x4d')])[_0x6b4f('0x18')](_0x5d181b,_0x41f033,_0x5c320b);if(_0x5d0de7){this['log'](_0x5d181b,_0x5d181b[_0x6b4f('0x40')]['id'],'DELETE');if(_0x41f033==null)return this[_0x6b4f('0x37')](0xc8,_0x5d0de7);_0x41f033[_0x6b4f('0x1a')](this[_0x6b4f('0x11')](0xc8,[],0x1,null,_0x6b4f('0x4e')));}}});this[_0x6b4f('0x4f')]=(_0x577132,_0x3521db,_0xd2051f)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x6b4f('0x1d')]['dbType']==_0x6b4f('0x1f')){_0x577132[this[_0x6b4f('0xb')]]['remove']((_0x12650b,_0x55337a)=>{if(_0x12650b){_0x3521db[_0x6b4f('0x32')](0x1f4)[_0x6b4f('0x11')](_0x12650b);}else{_0x3521db[_0x6b4f('0x32')](0xc8)[_0x6b4f('0x11')]({'message':_0x6b4f('0x4e')});}});}else if(this['options'][_0x6b4f('0x1e')]==_0x6b4f('0x20')){const _0x191e4e=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x33')][_0x6b4f('0x50')])['exec'](_0x577132,_0x3521db,_0xd2051f);if(_0x191e4e){this[_0x6b4f('0xf')](_0x577132,_0x577132[_0x6b4f('0x26')]['id']!=null?_0x577132[_0x6b4f('0x26')]['id']:null,'DELETE');if(_0x3521db==null)return this[_0x6b4f('0x37')](0xc8,_0x191e4e);_0x3521db['json'](this[_0x6b4f('0x11')](0xc8,_0x191e4e,_0x191e4e[_0x6b4f('0x15')],null,_0x6b4f('0x4e')));}}});this[_0x6b4f('0x51')]=(_0x46daa7,_0xa7bd39,_0x445f93)=>__awaiter(this,void 0x0,void 0x0,function*(){this[_0x6b4f('0x2c')](_0x46daa7,_0x6b4f('0x47'));_0x46daa7['secretFields']==null?_0x46daa7[_0x6b4f('0x21')]=this[_0x6b4f('0x52')](this[_0x6b4f('0xc')][_0x6b4f('0x35')]):null;if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x1f')){_0xa7bd39[_0x6b4f('0x32')](0xc8)[_0x6b4f('0x11')]({'message':_0x6b4f('0x53')});}else if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x20')){const _0x29ba71=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x33')][_0x6b4f('0x51')])[_0x6b4f('0x18')](_0x46daa7,_0xa7bd39,_0x445f93);if(_0x29ba71){if(_0xa7bd39==null){_0x29ba71&&_0x29ba71[_0x6b4f('0x15')]>0x0?_0x29ba71[_0x6b4f('0x43')]((_0x38a8ad,_0x3db449,_0x5022f2)=>{this[_0x6b4f('0xf')](_0x46daa7,_0x38a8ad['id'],_0x6b4f('0x49'));}):null;return this[_0x6b4f('0x37')](0xc8,_0x29ba71);}_0xa7bd39[_0x6b4f('0x1a')](this['send'](0xc8,_0x29ba71,_0x29ba71[_0x6b4f('0x15')],null,_0x6b4f('0x4a')));}else{if(_0xa7bd39==null)return this[_0x6b4f('0x37')](0xc8,_0x29ba71);;_0xa7bd39[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0xcc,_0x6b4f('0x54')));}}});this[_0x6b4f('0x55')]=(_0x2b7ddb,_0x4f261e,_0x2f3315)=>{this['stopSubscription'](_0x2b7ddb['session']['id'],_0x2b7ddb[_0x6b4f('0x26')][_0x6b4f('0x56')],_0x4f261e,_0x2f3315);};this['subscribe']=(_0x1493f5,_0xce9ae5,_0x161f78)=>{const _0x1998d4=this[_0x6b4f('0xd')]['getSchema'](_0x6b4f('0x57'))['controller'];const _0x37ec31=_0x1493f5['body'][_0x6b4f('0x58')]!=null?_0x1493f5[_0x6b4f('0x26')][_0x6b4f('0x58')]:_0x1493f5['session']['id'];const _0x44e0b3=_0x1493f5[_0x6b4f('0x26')][_0x6b4f('0x59')]!=null?_0x1493f5[_0x6b4f('0x26')][_0x6b4f('0x59')]:0x1388;_0x1998d4[_0x6b4f('0x33')]['get']({'body':{'get':['*'],'where':{'sid':_0x37ec31}}},null,null,_0x541df=>{let _0x14629d=_0x541df[0x0][_0x6b4f('0x5a')][_0x6b4f('0x5b')]!=null?_0x541df[0x0]['sess']['clients']:[];let _0x45f55c=_0x1493f5[_0x6b4f('0x26')][_0x6b4f('0x5c')]!=null?_0x1493f5[_0x6b4f('0x26')][_0x6b4f('0x5c')]:null;let _0x4cb507=_0x1493f5['body'][_0x6b4f('0x56')]!=null?_0x1493f5[_0x6b4f('0x26')]['subscription']:'';let _0x4b1826={},_0x21485d=![];if(_0x14629d!=null&&_0x14629d[_0x6b4f('0x15')]==0x0){if(_0x1493f5[_0x6b4f('0x26')][_0x6b4f('0x58')]==null){_0x4b1826['id']=_0x37ec31;_0x4b1826[_0x6b4f('0x5d')]=[];_0x4b1826[_0x6b4f('0x5d')][_0x6b4f('0x5e')]({'name':_0x4cb507});_0x14629d['push'](_0x4b1826);_0x541df[0x0][_0x6b4f('0x5a')][_0x6b4f('0x5b')]=_0x14629d;_0x21485d=!![];}}else{let _0x548dc3=_0x14629d[0x0]!=null?_0x14629d[0x0][_0x6b4f('0x5d')][_0x6b4f('0x5f')](_0x57b299=>{return _0x57b299[_0x6b4f('0xb')]==_0x4cb507;}):-0x1;if(_0x548dc3==-0x1){_0x14629d[0x0]['subscriptions'][_0x6b4f('0x5e')]({'name':_0x4cb507});_0x541df[0x0][_0x6b4f('0x5a')][_0x6b4f('0x5b')][0x0]=_0x14629d[0x0];_0x21485d=!![];}else{if(_0x548dc3!=-0x1&&_0x45f55c!=null){this[_0x6b4f('0x60')](_0x37ec31,_0x4cb507,_0x1493f5,_0xce9ae5,_0x161f78);}else{this['stopSubscription'](_0x37ec31,_0x4cb507,null,null,(_0x56a801,_0x541df)=>{setTimeout(()=>__awaiter(this,void 0x0,void 0x0,function*(){if(_0x541df){const _0x400fe0=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x33')][_0x6b4f('0x61')])['exec'](_0x1493f5,_0xce9ae5,_0x161f78);if(_0x400fe0&&_0x400fe0[_0x6b4f('0x15')]>0x0){}_0xce9ae5['json']({'message':_0x6b4f('0x62'),'data':_0x400fe0,'count':_0x400fe0[_0x6b4f('0x15')],'timestamp':new Date()[_0x6b4f('0x63')](),'method':_0x1493f5['method'],'servedByProcessID':process[_0x6b4f('0x64')],'subscriberID':_0x37ec31,'subscription':_0x4cb507});}}),_0x44e0b3);});}}}if(_0x21485d){this[_0x6b4f('0x65')](_0x4b1826,{'sess':JSON[_0x6b4f('0x66')](_0x541df[0x0][_0x6b4f('0x5a')]),'where':{'sid':_0x37ec31}},_0x159677=>{this[_0x6b4f('0x60')](_0x37ec31,_0x4cb507,_0x1493f5,_0xce9ae5,_0x161f78);});}});};this[_0x6b4f('0x67')]=(_0x573373,_0x46c2a3,_0x45c078)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x1f')){_0x46c2a3[_0x6b4f('0x32')](0xc8)[_0x6b4f('0x11')]({'message':_0x6b4f('0x41')});}else if(this['options']['dbType']==_0x6b4f('0x20')){const _0x3618bf=yield this[_0x6b4f('0x16')](this[_0x6b4f('0x33')][_0x6b4f('0x61')])[_0x6b4f('0x18')](_0x573373,_0x46c2a3,_0x45c078);if(_0x3618bf){if(_0x46c2a3==null)return this[_0x6b4f('0x37')](0xc8,_0x3618bf);const _0x755c0d={'body':{'table':this[_0x6b4f('0xb')]}};const _0x5e7826=yield this['getTotalCount'](_0x755c0d,null,null);const _0x3e3dfc=_0x5e7826&&_0x5e7826[_0x6b4f('0x68')]!=null&&_0x5e7826[_0x6b4f('0x68')]['length']>0x0&&_0x5e7826[_0x6b4f('0x68')][0x0][_0x6b4f('0x69')]!=null?_0x5e7826['data'][0x0][_0x6b4f('0x69')]:0x0;_0x46c2a3['json'](this[_0x6b4f('0x11')](0xc8,_0x3618bf,_0x3618bf[_0x6b4f('0x15')],parseInt(_0x3e3dfc),'get\x20success'));}else{_0x46c2a3[_0x6b4f('0x1a')](this['sendError'](0xcc,_0x6b4f('0x6a')));}}});this[_0x6b4f('0x6b')]=(_0x50fc94,_0x5dd279,_0x182b71)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x6b4f('0x1d')]['dbType']==_0x6b4f('0x1f')){_0x5dd279['status'](0xc8)['send']({'message':_0x6b4f('0x41')});}else if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x20')){const _0x23e53f=yield this[_0x6b4f('0x16')](this['psql'][_0x6b4f('0x6b')])[_0x6b4f('0x18')](_0x50fc94,_0x5dd279,_0x182b71);if(_0x23e53f){if(_0x5dd279==null)return this[_0x6b4f('0x37')](0xc8,_0x23e53f);_0x5dd279['json'](this[_0x6b4f('0x11')](0xc8,{'count':_0x23e53f[0x0][_0x6b4f('0x69')]},_0x23e53f[_0x6b4f('0x15')],parseInt(_0x23e53f[0x0]['count']),_0x6b4f('0x6c')));}else{_0x5dd279['json'](this[_0x6b4f('0x1b')](0xcc,'get\x20total\x20count\x20success'));}}});this[_0x6b4f('0x6d')]=(_0x5c5f8b,_0x4bc822,_0x58f6f1)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this['options']['dbType']==_0x6b4f('0x1f')){_0x4bc822[_0x6b4f('0x32')](0xc8)[_0x6b4f('0x11')]({'message':_0x6b4f('0x41')});}else if(this[_0x6b4f('0x1d')][_0x6b4f('0x1e')]==_0x6b4f('0x20')){const _0x315276=_0x5c5f8b[_0x6b4f('0x26')][_0x6b4f('0x1d')]!=null?_0x5c5f8b[_0x6b4f('0x26')][_0x6b4f('0x1d')]:{};const _0x4f3d61=Object['keys'](_0x315276)[_0x6b4f('0x15')]>0x0&&_0x315276[_0x6b4f('0x6e')];const _0x437ccc=Object[_0x6b4f('0x6f')](_0x315276)['length']>0x0&&_0x315276[_0x6b4f('0x70')];let _0x5e560d;if(_0x437ccc){let _0x1fe336=yield this[_0x6b4f('0x70')](_0x437ccc);_0x5e560d=_0x1fe336&&_0x1fe336[_0x6b4f('0x68')]&&_0x1fe336[_0x6b4f('0x68')][_0x6b4f('0x71')]&&_0x1fe336[_0x6b4f('0x68')]['rows'][_0x6b4f('0x15')]>0x0?_0x1fe336[_0x6b4f('0x68')][_0x6b4f('0x71')][0x0][_0x6b4f('0x68')]:[];}else{_0x5e560d=yield this[_0x6b4f('0x16')](this['psql'][_0x6b4f('0x61')])[_0x6b4f('0x18')](_0x5c5f8b,_0x4bc822,_0x58f6f1);}if(_0x5e560d&&_0x5e560d['length']>0x0){let _0x3295ff=[];if(_0x4bc822==null)return this[_0x6b4f('0x37')](0xc8,_0x5e560d);_0x3295ff=this[_0x6b4f('0x72')](_0x5e560d);if(_0x4f3d61){_0x3295ff=_0x3295ff[_0x6b4f('0x73')]((_0x163d4a,_0x2a3539,_0x3876a9)=>{Object['keys'](_0x163d4a)[_0x6b4f('0x43')](_0x10c72e=>{if(_0x10c72e[_0x6b4f('0x74')]('id')||_0x10c72e[_0x6b4f('0x74')]('.id')||_0x10c72e['includes']('_id')){delete _0x163d4a[_0x10c72e];};});return _0x163d4a;});}let _0x173b24=_0x3295ff[_0x6b4f('0x75')](0x0);let _0x198dc1=_0x173b24['sort']((_0x5e2bd1,_0x3a5b1b)=>{return Object['keys'](_0x5e2bd1)[_0x6b4f('0x15')]>Object['keys'](_0x3a5b1b)[_0x6b4f('0x15')]?-0x1:0x1;});let _0x12d937=_0x198dc1[0x0];let _0x4387e5=Object[_0x6b4f('0x6f')](_0x12d937);let _0x2a1522=_0x3295ff[_0x6b4f('0x76')]((_0x5a88b0,_0xf4dff3,_0x52b6d1,_0x7568d1)=>{if(_0x52b6d1===0x0)_0x5a88b0+='\x0a';Object[_0x6b4f('0x6f')](_0xf4dff3)[_0x6b4f('0x73')]((_0x34ed3e,_0x1b391c)=>{if(_0x1b391c!==0x0)_0x5a88b0+=',';const _0x11dc44=_0x34ed3e['slice'](_0x34ed3e[_0x6b4f('0x15')]-0x3,_0x34ed3e[_0x6b4f('0x15')])===_0x6b4f('0x77')||_0x34ed3e['includes'](_0x6b4f('0x78'))&&moment(_0xf4dff3[_0x34ed3e],moment['ISO_8601'])[_0x6b4f('0x79')]();if(_0x11dc44&&_0xf4dff3[_0x34ed3e]!==null&&_0xf4dff3[_0x34ed3e]!='-'){_0xf4dff3[_0x34ed3e]=moment(_0xf4dff3[_0x34ed3e])[_0x6b4f('0x7a')]('MM/DD/YYYY');}_0x5a88b0+=_0xf4dff3[_0x34ed3e];});return _0x5a88b0+'\x0a';},_0x4387e5);_0x4bc822[_0x6b4f('0x32')](0xc8)[_0x6b4f('0x11')]({'message':'CSV\x20Export\x20Success','data':_0x2a1522,'filename':this[_0x6b4f('0xb')]+'_export_'+moment()['format'](_0x6b4f('0x7b'))+_0x6b4f('0x7c')});}else{_0x4bc822[_0x6b4f('0x1a')](this[_0x6b4f('0x1b')](0x1f4,{'message':_0x6b4f('0x7d')}));}}});this[_0x6b4f('0x7e')]=(_0x52e202,_0x51963c,_0x1ac604)=>{const _0x4fe47a=_0x52e202['body'][_0x6b4f('0x7f')]!=null?_0x52e202[_0x6b4f('0x26')][_0x6b4f('0x7f')]:null;let _0x43e3bf=_0x6b4f('0x80');_0x4fe47a!=null?_0x43e3bf+=_0x6b4f('0x81')+_0x4fe47a+_0x6b4f('0x82'):_0x43e3bf+=_0x6b4f('0x83');this[_0x6b4f('0x70')](_0x43e3bf,(_0x3f9adf,_0x243721)=>{if(!_0x3f9adf&&_0x243721&&_0x243721[_0x6b4f('0x71')][_0x6b4f('0x15')]>0x0){_0x51963c[_0x6b4f('0x1a')](this['send'](0xc8,_0x243721['rows']));}else{_0x51963c['json'](this[_0x6b4f('0x1b')](0x1f4,{'message':_0x6b4f('0x84')}));}});};this[_0x6b4f('0x85')]=(_0x2b21bb,_0x5edf26,_0x44cd23)=>{const _0x231a78=_0x2b21bb[_0x6b4f('0x26')][_0x6b4f('0x7f')]!=null?_0x2b21bb[_0x6b4f('0x26')][_0x6b4f('0x7f')]:this[_0x6b4f('0xb')];const _0x1fc560=_0x6b4f('0x86')+_0x231a78+'\x27';this['query'](_0x1fc560,(_0x21c8d7,_0x16f592)=>{if(!_0x21c8d7&&_0x16f592&&_0x16f592[_0x6b4f('0x71')][_0x6b4f('0x15')]>0x0){_0x5edf26[_0x6b4f('0x1a')](this['send'](0xc8,_0x16f592[_0x6b4f('0x71')]));}else{_0x5edf26[_0x6b4f('0x1a')](this['sendError'](0x1f4,{'message':'No\x20property\x20found!'}));}});};this[_0x6b4f('0x70')]=(_0x3c2caf,_0x3da23c)=>__awaiter(this,void 0x0,void 0x0,function*(){if(_0x3da23c==null){let _0x32dcca=yield this[_0x6b4f('0x16')](this[_0x6b4f('0xd')]['db'][_0x6b4f('0x70')])[_0x6b4f('0x18')](_0x3c2caf);return this[_0x6b4f('0x37')](0xc8,_0x32dcca);}else{this['api']['db'][_0x6b4f('0x70')](_0x3c2caf,null,(_0x84c242,_0x5e3ea3)=>{if(_0x5e3ea3){_0x3da23c(null,_0x5e3ea3);}else{_0x3da23c({'errorCode':0x1f4,'errorMessage':_0x84c242},null);}});}});this[_0x6b4f('0x87')]=()=>{return this[_0x6b4f('0x88')];};this[_0x6b4f('0x1b')]=(_0x4c07bd,_0x251183)=>{return{'errorMessage':_0x251183,'statusCode':_0x4c07bd};};this[_0x6b4f('0x11')]=(_0x2f8073,_0x1afa0b,_0x299085,_0x38ba75,_0x434aa8)=>{const _0x3bc470={'data':_0x1afa0b,'statusCode':_0x2f8073};_0x434aa8!=null?_0x3bc470['message']=_0x434aa8:null;_0x299085!=null?_0x3bc470[_0x6b4f('0x68')]=_0x1afa0b:null;_0x38ba75!=null?_0x3bc470['totalRowCount']=_0x38ba75:null;return _0x3bc470;};this['setError']=_0x4f5405=>{this[_0x6b4f('0x88')][_0x6b4f('0x5e')](_0x4f5405);};this[_0x6b4f('0x33')]=new postgres_wrapper_1[(_0x6b4f('0x89'))](this['options'],this[_0x6b4f('0xb')],this[_0x6b4f('0xc')],this[_0x6b4f('0xd')]);}['hash'](){return this['random']()+this['random']()+'-'+this[_0x6b4f('0x8a')]()+'-'+this[_0x6b4f('0x8a')]()+'-'+this['random']()+'-'+this[_0x6b4f('0x8a')]()+this[_0x6b4f('0x8a')]()+this['random']();}[_0x6b4f('0x8a')](){return Math[_0x6b4f('0x8b')]((0x1+Math[_0x6b4f('0x8a')]())*0x10000)[_0x6b4f('0x8c')](0x12)[_0x6b4f('0x8d')](0x1);}[_0x6b4f('0x14')](_0x2bdccc){if(_0x2bdccc[_0x6b4f('0x8e')][_0x6b4f('0x8f')]&&_0x2bdccc[_0x6b4f('0x8e')][_0x6b4f('0x8f')][_0x6b4f('0x90')]('\x20')[0x0]===_0x6b4f('0x91')){return _0x2bdccc[_0x6b4f('0x8e')]['authorization'][_0x6b4f('0x90')]('\x20')[0x1];}else if(_0x2bdccc[_0x6b4f('0x70')]&&_0x2bdccc['query']['token']){return _0x2bdccc[_0x6b4f('0x70')]['token'];}return null;}[_0x6b4f('0x17')](_0x897d4,_0x2debf2){jwt['verify'](_0x897d4,process['env'][_0x6b4f('0x92')],(_0x592c40,_0x1d8ab3)=>{_0x592c40?_0x2debf2(_0x592c40,null):_0x2debf2(null,_0x1d8ab3!=null?_0x1d8ab3:{});});}[_0x6b4f('0xf')](_0x5b74f8,_0x5c5b45,_0x3da4d3){return __awaiter(this,void 0x0,void 0x0,function*(){let _0x957fde={'table_name':this[_0x6b4f('0xb')],'record_id':_0x5c5b45,'user_id':_0x5b74f8['reqUser']!=null?_0x5b74f8[_0x6b4f('0x24')]['id']:null,'method':_0x3da4d3,'timestamp':new Date()['getTime'](),'created_at':_0x6b4f('0x93'),'updated_at':_0x6b4f('0x93'),'created_by':_0x5b74f8[_0x6b4f('0x24')]!=null?_0x5b74f8[_0x6b4f('0x24')]['username']:_0x6b4f('0x94'),'updated_by':_0x5b74f8[_0x6b4f('0x24')]!=null?_0x5b74f8[_0x6b4f('0x24')][_0x6b4f('0x95')]:'SYS'};const _0x235c5c=this[_0x6b4f('0xd')][_0x6b4f('0x96')](_0x6b4f('0x97'))[_0x6b4f('0x98')];let _0x1780a0=yield this[_0x6b4f('0x16')](_0x235c5c[_0x6b4f('0x33')][_0x6b4f('0x2d')],_0x235c5c[_0x6b4f('0x33')])['exec']({'body':_0x957fde},null,null);if(_0x1780a0){}});}[_0x6b4f('0x99')](_0x5db658,_0x3f9639){const _0x38f39f=this[_0x6b4f('0xd')][_0x6b4f('0x96')]('Changelog')[_0x6b4f('0x98')];const _0x44b8ea=this[_0x6b4f('0xd')][_0x6b4f('0x96')](_0x6b4f('0x57'))['controller'];_0x38f39f[_0x6b4f('0x33')]['get']({'body':{'get':[_0x6b4f('0x5c'),'method'],'where':{'table_name':this[_0x6b4f('0xb')]},'sort':{'timestamp':_0x6b4f('0x9a')},'limit':0x1}},null,null,_0x4d1929=>{_0x44b8ea[_0x6b4f('0x33')][_0x6b4f('0x67')]({'body':{'get':['*'],'where':{'sid':_0x5db658}}},null,null,_0x551049=>{_0x3f9639(_0x4d1929,_0x551049);});});}['getSecretFields'](_0x3c6b5f){let _0x2537d7=0x0;let _0x405491=[];for(let _0x12338f in _0x3c6b5f){let _0x362816=_0x3c6b5f[_0x12338f];for(let _0x283327 in _0x362816){if(_0x283327=='encrypt'&&_0x362816[_0x283327]==!![]){_0x405491[_0x6b4f('0x5e')]({'table':this['name'],'field':_0x12338f});}}}return _0x405491;}['getAllSecretFields'](){let _0x4283da=[],_0x5e0ee0=[];for(let _0x11de2f in this['api'][_0x6b4f('0x9b')]){_0x4283da[_0x6b4f('0x5e')]({'table':this[_0x6b4f('0xd')][_0x6b4f('0x9b')][_0x11de2f][_0x6b4f('0x98')]['name'],'schema':this['api'][_0x6b4f('0x9b')][_0x11de2f][_0x6b4f('0x35')]});}let _0x55529;for(let _0x544e17 in _0x4283da){let _0xd7f8e6=_0x4283da[_0x544e17][_0x6b4f('0x35')],_0x2da2d2=_0x4283da[_0x544e17][_0x6b4f('0x7f')],_0x55529=Object['keys'](_0xd7f8e6);for(let _0x1959dd in _0x55529){let _0x17986b;if(typeof _0xd7f8e6[_0x55529[_0x1959dd]][_0x6b4f('0x9c')]!=_0x6b4f('0x9d')&&_0xd7f8e6[_0x55529[_0x1959dd]][_0x6b4f('0x9c')]!=null&&_0xd7f8e6[_0x55529[_0x1959dd]][_0x6b4f('0x9c')]==!![]){_0x17986b={'table':_0x2da2d2,'field':_0x55529[_0x1959dd],'encryption':'crypto'};}else if(typeof _0xd7f8e6[_0x55529[_0x1959dd]]['bcrypt']!='undefined'&&_0xd7f8e6[_0x55529[_0x1959dd]][_0x6b4f('0x9e')]!=null&&_0xd7f8e6[_0x55529[_0x1959dd]][_0x6b4f('0x9e')]==!![]){_0x17986b={'table':_0x2da2d2,'field':_0x55529[_0x1959dd],'encryption':_0x6b4f('0x9e')};}else{_0x17986b=null;}if(_0x17986b&&_0x5e0ee0[_0x6b4f('0x9f')](_0x17986b)==-0x1){_0x5e0ee0['push'](_0x17986b);}else{}}}return _0x5e0ee0;}[_0x6b4f('0x28')](_0xb26b99,_0x3cd38f){return _0xb26b99[_0x6b4f('0x26')][_0x3cd38f]!=null&&typeof _0xb26b99['body'][_0x3cd38f]!=_0x6b4f('0x9d')?_0xb26b99['body'][_0x3cd38f]:_0xb26b99[_0x6b4f('0x24')]!=null&&_0xb26b99[_0x6b4f('0x24')][_0x6b4f('0x95')]!=''&&_0xb26b99['reqUser'][_0x6b4f('0x95')]!=null&&typeof _0xb26b99[_0x6b4f('0x24')]['username']!='undefined'?_0xb26b99[_0x6b4f('0x26')][_0x3cd38f]=_0xb26b99[_0x6b4f('0x24')]['username']:_0x6b4f('0x94');}['setTouchByUser'](_0x52797b,_0x3624c6){switch(_0x3624c6){case _0x6b4f('0x47'):_0x52797b[_0x6b4f('0x26')][_0x6b4f('0x2b')]=this['getTouchByUser'](_0x52797b,_0x6b4f('0x2b'));break;case _0x6b4f('0x2d'):_0x52797b[_0x6b4f('0x26')]['created_by']=this[_0x6b4f('0x28')](_0x52797b,_0x6b4f('0x29'));break;}return _0x52797b;}[_0x6b4f('0x60')](_0x2bd1ae,_0x3eb6bc,_0x33dced,_0x2ccc54,_0x2f4f40){console['log'](_0x6b4f('0xa0')+_0x3eb6bc+'\x20------------->');let _0x5c9631=_0x33dced['body']['timestamp']!=null?_0x33dced[_0x6b4f('0x26')]['timestamp']:null,_0x3093da=_0x33dced['body'][_0x6b4f('0x59')]!=null?_0x33dced[_0x6b4f('0x26')]['interval']:0x1388;let _0x66e7bf=0x0,_0x38f90b=0x1e,_0x144723=parseInt(_0x3093da)/0x3e8,_0x323b3c=parseInt(_0x38f90b[_0x6b4f('0x8c')]())/parseInt(_0x144723[_0x6b4f('0x8c')]());_0x323b3c<0x1?_0x323b3c=0x1e:![];let _0x4403b5=setInterval(()=>{this[_0x6b4f('0x99')](_0x2bd1ae,(_0x359eca,_0x3d092f)=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x4d5d15=_0x3d092f&&_0x3d092f[0x0]!=null&&_0x3d092f[0x0][_0x6b4f('0x5a')]['clients']!=null?_0x3d092f[0x0][_0x6b4f('0x5a')][_0x6b4f('0x5b')]:[];let _0x87374f=_0x4d5d15[0x0];let _0x3e38a1=_0x359eca&&_0x359eca['length']>0x0?_0x359eca[0x0]:{},_0x2174b1=_0x33dced[_0x6b4f('0x26')]['timestamp']==null;_0x5c9631==null?_0x5c9631=new Date()[_0x6b4f('0x63')]():null;let _0x530cff=!Object[_0x6b4f('0x6f')](_0x3e38a1)[_0x6b4f('0x15')]?![]:_0x5c9631!=_0x3e38a1[_0x6b4f('0x5c')];let _0x461482=_0x66e7bf>=_0x323b3c;console['log'](_0x6b4f('0xa1'),_0x87374f['subscriptions']);let _0x17bdeb=_0x87374f&&_0x87374f[_0x6b4f('0x5d')][_0x6b4f('0x15')]>0x0?_0x87374f[_0x6b4f('0x5d')][_0x6b4f('0x5f')](_0x586d4d=>{return _0x586d4d['name']==_0x3eb6bc;}):-0x1;if(_0x17bdeb==-0x1){clearInterval(_0x4403b5);console[_0x6b4f('0xf')]('subscription\x20'+_0x3eb6bc+'\x20stopped.');const _0x28df93=yield this['toPromise'](this['psql'][_0x6b4f('0x61')])[_0x6b4f('0x18')](_0x33dced,_0x2ccc54,_0x2f4f40);_0x2ccc54[_0x6b4f('0x1a')]({'message':_0x6b4f('0xa2'),'data':_0x28df93,'count':_0x28df93['length'],'timestamp':null,'method':null,'servedByProcessID':process[_0x6b4f('0x64')],'subscriberID':_0x2bd1ae,'subscription':_0x3eb6bc});}else{if(_0x530cff||_0x461482){const _0x3e9897=yield this['toPromise'](this[_0x6b4f('0x33')]['select'])[_0x6b4f('0x18')](_0x33dced,_0x2ccc54,_0x2f4f40);console[_0x6b4f('0xf')]('data---->',_0x3e9897);clearInterval(_0x4403b5);_0x2ccc54['json']({'message':_0x6b4f('0x62'),'data':_0x3e9897,'count':_0x3e9897[_0x6b4f('0x15')],'timestamp':_0x17bdeb==-0x1?null:_0x530cff?_0x3e38a1[_0x6b4f('0x5c')]:_0x5c9631,'method':_0x461482?null:!_0x530cff?null:_0x3e38a1['method'],'servedByProcessID':process[_0x6b4f('0x64')],'subscriberID':_0x2bd1ae,'subscription':_0x3eb6bc});}}}));console[_0x6b4f('0xf')](_0x6b4f('0xa3')+_0x66e7bf+':\x20'+_0x3eb6bc+_0x6b4f('0xa4'));_0x66e7bf++;},_0x3093da);_0x33dced['on'](_0x6b4f('0xa5'),()=>{console[_0x6b4f('0xf')](_0x6b4f('0xa6'));clearInterval(_0x4403b5);this[_0x6b4f('0xa7')](_0x2bd1ae);_0x2ccc54[_0x6b4f('0xa8')]();});}[_0x6b4f('0xa7')](_0x3a654c){const _0x25a537=this[_0x6b4f('0xd')][_0x6b4f('0x96')](_0x6b4f('0x57'))[_0x6b4f('0x98')];_0x25a537[_0x6b4f('0x33')]['get']({'body':{'get':['*'],'where':{'sid':_0x3a654c}}},null,null,_0x26ec97=>{_0x26ec97[0x0]['sess'][_0x6b4f('0x5b')]!=null?delete _0x26ec97[0x0][_0x6b4f('0x5a')][_0x6b4f('0x5b')]:null;this[_0x6b4f('0x65')](_0x3a654c,{'sess':JSON[_0x6b4f('0x66')](_0x26ec97[0x0][_0x6b4f('0x5a')]),'where':{'sid':_0x3a654c}});});}[_0x6b4f('0x65')](_0x277dd8,_0xdea755,_0x1e80fb){const _0x33a57d=this[_0x6b4f('0xd')][_0x6b4f('0x96')](_0x6b4f('0x57'))[_0x6b4f('0x98')];_0x33a57d['psql']['updateSet']({'body':_0xdea755},null,null,_0x45c7ff=>{return _0x1e80fb?_0x1e80fb(_0x45c7ff):_0x45c7ff;});}[_0x6b4f('0xa9')](_0x20bcff,_0x536df0,_0x16dbd3,_0x169170,_0x4476d4){const _0x4493d3=this[_0x6b4f('0xd')][_0x6b4f('0x96')]('Session')[_0x6b4f('0x98')];_0x4493d3[_0x6b4f('0x33')][_0x6b4f('0x67')]({'body':{'get':['*'],'where':{'sid':_0x20bcff}}},null,null,_0xb6c8f0=>{let _0x1d86f3=_0xb6c8f0[0x0][_0x6b4f('0x5a')]['clients']!=null?_0xb6c8f0[0x0]['sess'][_0x6b4f('0x5b')]:[];if(_0x1d86f3&&_0x1d86f3['length']>0x0){let _0x5ac944=_0x1d86f3[0x0];let _0x1a65fd=_0x5ac944[_0x6b4f('0x5d')][_0x6b4f('0x5f')](_0x5b081a=>{return _0x5b081a[_0x6b4f('0xb')]==_0x536df0;});if(_0x1a65fd!=-0x1){let _0x159bf0=_0x5ac944['subscriptions'][_0x1a65fd];_0x5ac944[_0x6b4f('0x5d')]=_0x5ac944[_0x6b4f('0x5d')]['filter'](_0x54b4e9=>{return _0x54b4e9[_0x6b4f('0xb')]!==_0x536df0;});_0xb6c8f0[0x0]['sess'][_0x6b4f('0x5b')][0x0]=_0x5ac944;this[_0x6b4f('0x65')](_0x20bcff,{'sess':JSON[_0x6b4f('0x66')](_0xb6c8f0[0x0][_0x6b4f('0x5a')]),'where':{'sid':_0x20bcff}},_0x4a557c=>{const _0x32ef5f={'message':'unsubscribe\x20success','timestamp':null,'method':null,'subscription':_0x536df0};return _0x16dbd3?_0x16dbd3['json'](_0x32ef5f):_0x4476d4!=null?_0x4476d4(null,_0x32ef5f):_0x32ef5f;});}else{const _0x30441b={'message':'unsubscribe\x20success!\x20no\x20subscription\x20found.','timestamp':null,'method':null,'subscription':_0x536df0};return _0x16dbd3?_0x16dbd3[_0x6b4f('0x1a')](_0x30441b):_0x4476d4!=null?_0x4476d4(null,_0x30441b):_0x30441b;}}else{const _0x166a9c={'message':'unsubscribe\x20error','timestamp':null,'method':null,'subscription':_0x536df0};return _0x16dbd3?_0x16dbd3[_0x6b4f('0x1a')](_0x166a9c):_0x4476d4!=null?_0x4476d4(_0x166a9c,null):_0x166a9c;}});}[_0x6b4f('0xaa')](_0x25b4de,_0x4eebe4){Object['keys'](_0x25b4de)[_0x6b4f('0x43')](_0x51fb86=>{if(Array[_0x6b4f('0x25')](_0x25b4de[_0x51fb86])){for(let _0x1320c5 in _0x25b4de[_0x51fb86]){const _0x137389=_0x25b4de[_0x51fb86][_0x1320c5];if(_0x137389&&typeof _0x137389!='string'&&Object[_0x6b4f('0x6f')](_0x137389)[_0x6b4f('0x15')]>0x0){_0x4eebe4[_0x51fb86]=_0x4eebe4[_0x51fb86]!=null?_0x4eebe4[_0x51fb86]:_0x137389;for(let _0x43c426 in _0x137389){if(Array[_0x6b4f('0x25')](_0x137389[_0x43c426])){}}}}}});return _0x4eebe4;}['JSONToRow'](_0x272078,_0x513db1){let _0x18da22={};return _0x272078[_0x6b4f('0x73')]((_0x5cb26e,_0x352bc0,_0x3b0528)=>{_0x18da22=this[_0x6b4f('0xaa')](_0x5cb26e,_0x18da22);Object['keys'](_0x5cb26e)[_0x6b4f('0x43')]((_0x328b13,_0x352bc0,_0x3b0528)=>{if(_0x328b13!==null){if(Array['isArray'](_0x5cb26e[_0x328b13])){for(let _0x352bc0 in _0x5cb26e[_0x328b13]){const _0x1b0def=_0x5cb26e[_0x328b13][_0x352bc0];if(_0x1b0def&&typeof _0x1b0def!=_0x6b4f('0xab')&&Object[_0x6b4f('0x6f')](_0x1b0def)[_0x6b4f('0x15')]>0x0){for(let _0x29b2a1 in _0x1b0def){if(Array[_0x6b4f('0x25')](_0x1b0def[_0x29b2a1])){}_0x5cb26e[_0x328b13+'.'+_0x29b2a1+'_'+_0x352bc0]=this['escape'](_0x1b0def[_0x29b2a1]);}}else{for(let _0x5df35c in _0x18da22[_0x328b13]){_0x5cb26e[_0x328b13+'.'+_0x5df35c+'_'+_0x352bc0]='-';}}}delete _0x5cb26e[_0x328b13];}else if(_0x5cb26e[_0x328b13]&&typeof _0x5cb26e[_0x328b13]!=_0x6b4f('0xab')&&Object[_0x6b4f('0x6f')](_0x5cb26e[_0x328b13])[_0x6b4f('0x15')]>0x0){for(let _0x1e357c in _0x5cb26e[_0x328b13]){_0x5cb26e[_0x328b13+'.'+_0x1e357c]=this[_0x6b4f('0xac')](_0x5cb26e[_0x328b13][_0x1e357c]);}delete _0x5cb26e[_0x328b13];}else{_0x5cb26e[_0x328b13]=this[_0x6b4f('0xac')](_0x5cb26e[_0x328b13]);}}else{_0x5cb26e[_0x328b13]='-';}});return _0x5cb26e;});}[_0x6b4f('0xac')](_0x57d360){let _0x9c5b7;let _0x3ec3d1;if(_0x57d360!=null){_0x9c5b7=_0x57d360[_0x6b4f('0x8c')]();typeof _0x57d360==_0x6b4f('0xab')?_0x3ec3d1=moment(_0x9c5b7,moment[_0x6b4f('0xad')])[_0x6b4f('0x79')]():![];if(!_0x3ec3d1){_0x9c5b7=_0x9c5b7[_0x6b4f('0x74')](',')?'\x22'+_0x9c5b7+'\x22'[_0x6b4f('0xae')]():_0x57d360;}else{return _0x57d360;}}else{_0x9c5b7='-';}return _0x9c5b7;}[_0x6b4f('0x37')](_0x191dab,_0x2114b2){return new Promise(_0x593881=>{_0x593881(this[_0x6b4f('0x11')](_0x191dab,_0x2114b2));});}[_0x6b4f('0x16')](_0x17d04b,_0xbaf2ff){const _0x540fba=(..._0x4670a7)=>{return new Promise((_0x5dbc76,_0x55e433)=>{const _0x4d1766=(_0x1648e1,_0x42b7f1)=>{_0x42b7f1&&_0x42b7f1!=null?_0x1648e1?_0x55e433(_0x1648e1):_0x5dbc76(_0x42b7f1):_0x5dbc76(_0x1648e1);};_0x17d04b[_0x6b4f('0x6')](_0xbaf2ff!=null?_0xbaf2ff:this[_0x6b4f('0x33')],[..._0x4670a7,_0x4d1766]);});};_0x540fba[_0x6b4f('0x18')]=(..._0x3fb1c0)=>{return _0x540fba(..._0x3fb1c0);};return _0x540fba;}static[_0x6b4f('0xaf')](_0x49a193){let _0x1e034b=_0x49a193||null;let _0x3867d6;if(_0x1e034b!=null){_0x3867d6=_0x1e034b[_0x6b4f('0x75')](0x0,_0x1e034b['indexOf']('T'));}return _0x3867d6;}}exports[_0x6b4f('0xb0')]=BaseController;